<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Memo App</title>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
  </head>
  <body>
    <div id="editor"></div>
    <script>
      const editor = new EditorJS({
        holder: 'editor',
      });

      // ファイルのオープン
      window.ipc.on('open-file', async (_, filePath) => {
        const content = await window.ipc.openFile(filePath);
        if (content) {
          await editor.render(content);
        }
      });

      // ファイルの保存
      window.ipc.on('save-content', async (_, filePath) => {
        const outputData = await editor.save();
        if (filePath) {
          await window.ipc.saveFile(outputData, filePath);
        } else {
          await window.ipc.saveFileAs(outputData);
        }
      });

      

      // アプリケーション終了時の保存
      window.addEventListener('beforeunload', async (e) => {
        e.preventDefault();
        await window.ipc.send('save-content');
      });

      // 読み込み時のコンテンツレンダリング
      window.ipc.send('load-content');
    </script>
  </body>
</html>
